{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\santo\\\\Desktop\\\\Web app\\\\Laundry-Scout\\\\Laundry Scout\\\\Laundry-Scout\\\\laundry_scout\\\\laundry-scout-admin\\\\src\\\\Components\\\\History.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { supabase } from \"../Supabase/supabaseClient\";\nimport \"../Style/History.css\";\nimport { FiBell, FiMenu, FiHome, FiFileText, FiUsers, FiUser, FiClock, FiMessageSquare, FiLogOut, FiSearch } from \"react-icons/fi\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Notifications from \"./Notifications\"; // âœ… Import Notifications Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction History() {\n  _s();\n  // ðŸ”¹ Data & States\n  const [records, setRecords] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [search, setSearch] = useState(\"\");\n  const [searchHistory, setSearchHistory] = useState([]);\n  const [showHistory, setShowHistory] = useState(false);\n\n  // ðŸ”¹ Dropdowns\n  const [showSettings, setShowSettings] = useState(false);\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const searchRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchHistory();\n  }, []);\n\n  // ðŸ”¹ Fetch only APPROVED + REJECTED records\n  const fetchHistory = async () => {\n    setLoading(true);\n    const {\n      data,\n      error\n    } = await supabase.from(\"business_profiles\").select(\"id,business_name,owner_first_name,owner_last_name,status,rejection_reason,created_at\").in(\"status\", [\"approved\", \"rejected\"]) // âœ… only approved & rejected\n    .order(\"created_at\", {\n      ascending: false\n    });\n    if (error) {\n      console.error(\"Error fetching history:\", error.message);\n    } else {\n      const transformed = (data || []).map(row => ({\n        id: row.id,\n        business_name: row.business_name,\n        owner_name: `${row.owner_first_name || \"\"} ${row.owner_last_name || \"\"}`.trim(),\n        action: row.status && row.status.toLowerCase() === \"approved\" ? \"Approval\" : row.status && row.status.toLowerCase() === \"rejected\" ? \"Rejection\" : \"-\",\n        status: row.status,\n        rejection_reason: row.rejection_reason,\n        created_at: row.created_at\n      }));\n      setRecords(transformed);\n    }\n    setLoading(false);\n  };\n\n  // ðŸ”¹ Save search into history\n  const handleKeyDown = e => {\n    if (e.key === \"Enter\" && search.trim() !== \"\") {\n      if (!searchHistory.includes(search)) {\n        setSearchHistory([search, ...searchHistory].slice(0, 5));\n      }\n      setShowHistory(false);\n    }\n  };\n  const deleteHistory = item => {\n    setSearchHistory(searchHistory.filter(h => h !== item));\n  };\n\n  // ðŸ”¹ Close history dropdown on outside click\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\n        setShowHistory(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  // ðŸ”¹ Filter records by search\n  const filteredRecords = records.filter(rec => [rec.business_name, rec.owner_name, rec.action, rec.status].filter(Boolean).some(field => field.toLowerCase().includes(search.toLowerCase())));\n\n  // ðŸ”¹ Toggle Sidebar\n  const toggleSidebar = () => {\n    setIsSidebarOpen(!isSidebarOpen);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-root\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: `sidebar ${isSidebarOpen ? \"open\" : \"closed\"}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-title\",\n        children: \"Laundry Scout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"sidebar-menu\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/dashboard\",\n              children: [/*#__PURE__*/_jsxDEV(FiHome, {\n                className: \"menu-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/applications\",\n              children: [/*#__PURE__*/_jsxDEV(FiFileText, {\n                className: \"menu-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Applications\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/clients\",\n              children: [/*#__PURE__*/_jsxDEV(FiUsers, {\n                className: \"menu-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Clients\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/users\",\n              children: [/*#__PURE__*/_jsxDEV(FiUser, {\n                className: \"menu-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"active\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/history\",\n              children: [/*#__PURE__*/_jsxDEV(FiClock, {\n                className: \"menu-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"History\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/feedback\",\n              children: [/*#__PURE__*/_jsxDEV(FiMessageSquare, {\n                className: \"menu-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Feedback\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logout\",\n        onClick: async () => {\n          await supabase.auth.signOut();\n          navigate(\"/login\");\n        },\n        children: [/*#__PURE__*/_jsxDEV(FiLogOut, {\n          className: \"menu-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: `dashboard-main ${isSidebarOpen ? \"shifted\" : \"full\"}`,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"History-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-left\",\n          children: [/*#__PURE__*/_jsxDEV(FiMenu, {\n            className: \"toggle-sidebar\",\n            onClick: toggleSidebar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"HISTORY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"dashboard-date\",\n            children: \"Track all approval and rejection records\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Notifications, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"filter-label\",\n            children: \"All Records\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"filter-count\",\n            children: filteredRecords.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-center\",\n          ref: searchRef,\n          children: [/*#__PURE__*/_jsxDEV(FiSearch, {\n            className: \"search-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search History\",\n            className: \"search-input\",\n            value: search,\n            onChange: e => setSearch(e.target.value),\n            onKeyDown: handleKeyDown,\n            onFocus: () => setShowHistory(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), showHistory && searchHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"search-history\",\n            children: searchHistory.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => setSearch(item),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete-history\",\n                onClick: e => {\n                  e.stopPropagation();\n                  deleteHistory(item);\n                },\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"date-btn\",\n            children: \"19 Dec - 20 Dec 2024\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"all-btn\",\n            children: \"All Transactions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"table-title\",\n          children: \"Application History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Business\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Owner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Reason\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: loading ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"6\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this) : filteredRecords.length > 0 ? filteredRecords.map((rec, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: rec.business_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: rec.owner_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: rec.action || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `status ${rec.status}`,\n                children: [rec.status && rec.status.toLowerCase() === \"approved\" && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: \"green\",\n                    fontWeight: \"bold\"\n                  },\n                  children: \"\\u2714 Approved\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 25\n                }, this), rec.status && rec.status.toLowerCase() === \"rejected\" && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: \"red\",\n                    fontWeight: \"bold\"\n                  },\n                  children: \"\\u2716 Rejected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: rec.status && rec.status.toLowerCase() === \"rejected\" ? rec.rejection_reason || \"N/A\" : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"record-time\",\n                children: rec.created_at ? new Date(rec.created_at).toLocaleString() : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 21\n              }, this)]\n            }, rec.id || idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 19\n            }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"6\",\n                children: \"No history records found.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(History, \"qIhQ6y6h8j2bNSaCslGlAeGSAj0=\", false, function () {\n  return [useNavigate];\n});\n_c = History;\nexport default History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["React","useState","useEffect","useRef","supabase","FiBell","FiMenu","FiHome","FiFileText","FiUsers","FiUser","FiClock","FiMessageSquare","FiLogOut","FiSearch","Link","useNavigate","Notifications","jsxDEV","_jsxDEV","History","_s","records","setRecords","loading","setLoading","isSidebarOpen","setIsSidebarOpen","search","setSearch","searchHistory","setSearchHistory","showHistory","setShowHistory","showSettings","setShowSettings","showNotifications","setShowNotifications","notifications","setNotifications","unreadCount","setUnreadCount","searchRef","navigate","fetchHistory","data","error","from","select","in","order","ascending","console","message","transformed","map","row","id","business_name","owner_name","owner_first_name","owner_last_name","trim","action","status","toLowerCase","rejection_reason","created_at","handleKeyDown","e","key","includes","slice","deleteHistory","item","filter","h","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","filteredRecords","rec","Boolean","some","field","toggleSidebar","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","auth","signOut","length","ref","type","placeholder","value","onChange","onKeyDown","onFocus","idx","stopPropagation","colSpan","style","color","fontWeight","Date","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/santo/Desktop/Web app/Laundry-Scout/Laundry Scout/Laundry-Scout/laundry_scout/laundry-scout-admin/src/Components/History.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { supabase } from \"../Supabase/supabaseClient\";\r\nimport \"../Style/History.css\";\r\nimport {\r\n  FiBell,\r\n  FiMenu,\r\n  FiHome,\r\n  FiFileText,\r\n  FiUsers,\r\n  FiUser,\r\n  FiClock,\r\n  FiMessageSquare,\r\n  FiLogOut,\r\n  FiSearch,\r\n} from \"react-icons/fi\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Notifications from \"./Notifications\"; // âœ… Import Notifications Component\r\n\r\nfunction History() {\r\n  // ðŸ”¹ Data & States\r\n  const [records, setRecords] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchHistory, setSearchHistory] = useState([]);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n\r\n  // ðŸ”¹ Dropdowns\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  const searchRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchHistory();\r\n  }, []);\r\n\r\n  // ðŸ”¹ Fetch only APPROVED + REJECTED records\r\n  const fetchHistory = async () => {\r\n    setLoading(true);\r\n    const { data, error } = await supabase\r\n      .from(\"business_profiles\")\r\n      .select(\"id,business_name,owner_first_name,owner_last_name,status,rejection_reason,created_at\")\r\n      .in(\"status\", [\"approved\", \"rejected\"]) // âœ… only approved & rejected\r\n      .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) {\r\n      console.error(\"Error fetching history:\", error.message);\r\n    } else {\r\n      const transformed = (data || []).map((row) => ({\r\n        id: row.id,\r\n        business_name: row.business_name,\r\n        owner_name: `${row.owner_first_name || \"\"} ${row.owner_last_name || \"\"}`.trim(),\r\n        action:\r\n          row.status && row.status.toLowerCase() === \"approved\"\r\n            ? \"Approval\"\r\n            : row.status && row.status.toLowerCase() === \"rejected\"\r\n            ? \"Rejection\"\r\n            : \"-\",\r\n        status: row.status,\r\n        rejection_reason: row.rejection_reason,\r\n        created_at: row.created_at,\r\n      }));\r\n      setRecords(transformed);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // ðŸ”¹ Save search into history\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && search.trim() !== \"\") {\r\n      if (!searchHistory.includes(search)) {\r\n        setSearchHistory([search, ...searchHistory].slice(0, 5));\r\n      }\r\n      setShowHistory(false);\r\n    }\r\n  };\r\n\r\n  const deleteHistory = (item) => {\r\n    setSearchHistory(searchHistory.filter((h) => h !== item));\r\n  };\r\n\r\n  // ðŸ”¹ Close history dropdown on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n        setShowHistory(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // ðŸ”¹ Filter records by search\r\n  const filteredRecords = records.filter((rec) =>\r\n    [rec.business_name, rec.owner_name, rec.action, rec.status]\r\n      .filter(Boolean)\r\n      .some((field) => field.toLowerCase().includes(search.toLowerCase()))\r\n  );\r\n\r\n  // ðŸ”¹ Toggle Sidebar\r\n  const toggleSidebar = () => {\r\n    setIsSidebarOpen(!isSidebarOpen);\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-root\">\r\n      {/* Sidebar */}\r\n      <aside className={`sidebar ${isSidebarOpen ? \"open\" : \"closed\"}`}>\r\n        <div className=\"sidebar-title\">Laundry Scout</div>\r\n        <nav className=\"sidebar-menu\">\r\n          <ul>\r\n            <li>\r\n              <Link to=\"/dashboard\">\r\n                <FiHome className=\"menu-icon\" />\r\n                <span>Dashboard</span>\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/applications\">\r\n                <FiFileText className=\"menu-icon\" />\r\n                <span>Applications</span>\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/clients\">\r\n                <FiUsers className=\"menu-icon\" />\r\n                <span>Clients</span>\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/users\">\r\n                <FiUser className=\"menu-icon\" />\r\n                <span>Users</span>\r\n              </Link>\r\n            </li>\r\n            <li className=\"active\">\r\n              <Link to=\"/history\">\r\n                <FiClock className=\"menu-icon\" />\r\n                <span>History</span>\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/feedback\">\r\n                <FiMessageSquare className=\"menu-icon\" />\r\n                <span>Feedback</span>\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <div className=\"logout\" onClick={async () => {\r\n          await supabase.auth.signOut();\r\n          navigate(\"/login\");\r\n        }}>\r\n          <FiLogOut className=\"menu-icon\" />\r\n          <span>Log Out</span>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Main */}\r\n      <main className={`dashboard-main ${isSidebarOpen ? \"shifted\" : \"full\"}`}>\r\n        {/* Header */}\r\n        <header className=\"History-header\">\r\n          <div className=\"header-left\">\r\n            <FiMenu className=\"toggle-sidebar\" onClick={toggleSidebar} />\r\n            <h2>HISTORY</h2>\r\n            <p className=\"dashboard-date\">\r\n              Track all approval and rejection records\r\n            </p>\r\n          </div>\r\n          {/* Notifications Component */}\r\n          <Notifications />\r\n        </header>\r\n\r\n        {/* Filters */}\r\n        <div className=\"history-filters\">\r\n          <div className=\"filter-left\">\r\n            <span className=\"filter-label\">All Records</span>\r\n            <span className=\"filter-count\">{filteredRecords.length}</span>\r\n          </div>\r\n\r\n          <div className=\"filter-center\" ref={searchRef}>\r\n            <FiSearch className=\"search-icon\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search History\"\r\n              className=\"search-input\"\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n              onKeyDown={handleKeyDown}\r\n              onFocus={() => setShowHistory(true)}\r\n            />\r\n            {showHistory && searchHistory.length > 0 && (\r\n              <ul className=\"search-history\">\r\n                {searchHistory.map((item, idx) => (\r\n                  <li key={idx} onClick={() => setSearch(item)}>\r\n                    <span>{item}</span>\r\n                    <button\r\n                      className=\"delete-history\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        deleteHistory(item);\r\n                      }}\r\n                    >\r\n                      Ã—\r\n                    </button>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"filter-right\">\r\n            <button className=\"date-btn\">19 Dec - 20 Dec 2024</button>\r\n            <button className=\"all-btn\">All Transactions</button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Table */}\r\n        <div className=\"history-table\">\r\n          <h3 className=\"table-title\">Application History</h3>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Business</th>\r\n                <th>Owner</th>\r\n                <th>Action</th>\r\n                <th>Status</th>\r\n                <th>Reason</th>\r\n                <th>Time</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan=\"6\">Loading...</td>\r\n                </tr>\r\n              ) : filteredRecords.length > 0 ? (\r\n                filteredRecords.map((rec, idx) => (\r\n                  <tr key={rec.id || idx}>\r\n                    <td>{rec.business_name}</td>\r\n                    <td>{rec.owner_name}</td>\r\n                    <td>{rec.action || \"-\"}</td>\r\n                    <td className={`status ${rec.status}`}>\r\n                      {rec.status && rec.status.toLowerCase() === \"approved\" && (\r\n                        <span style={{ color: \"green\", fontWeight: \"bold\" }}>\r\n                          âœ” Approved\r\n                        </span>\r\n                      )}\r\n                      {rec.status && rec.status.toLowerCase() === \"rejected\" && (\r\n                        <span style={{ color: \"red\", fontWeight: \"bold\" }}>\r\n                          âœ– Rejected\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {rec.status && rec.status.toLowerCase() === \"rejected\"\r\n                        ? rec.rejection_reason || \"N/A\"\r\n                        : \"N/A\"}\r\n                    </td>\r\n                    <td className=\"record-time\">\r\n                      {rec.created_at\r\n                        ? new Date(rec.created_at).toLocaleString()\r\n                        : \"\"}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"6\">No history records found.</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}